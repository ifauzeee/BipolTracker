:root { --bg-color: #f8f9fa; --text-main: #1f2937; --text-sub: #6b7280; --sheet-bg: rgba(255, 255, 255, 0.75); --sheet-border: rgba(255, 255, 255, 0.4); --accent: #BF1E2E; --accent-glow: rgba(191, 30, 46, 0.4); --secondary: #159BB3; --shadow: 0 8px 32px rgba(0, 0, 0, 0.1); --glass-blur: blur(20px); --font-main: 'Outfit', sans-serif; --card-bg: rgba(255, 255, 255, 0.6); }
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; font-family: var(--font-main); }
body { overflow: hidden; background: var(--bg-color); height: 100vh; width: 100vw; transition: background 0.3s ease, color 0.3s ease; }
#map { height: 100dvh; width: 100%; transition: filter 0.3s ease; }
.mapboxgl-ctrl-logo, .mapboxgl-ctrl-attrib { display: none !important; }
.floating-controls { position: absolute; top: 50px; right: 20px; display: flex; flex-direction: column; gap: 12px; z-index: 10; }
.fab-btn { width: 44px; height: 44px; border-radius: 14px; border: 1px solid var(--sheet-border); background: var(--sheet-bg); color: var(--text-main); box-shadow: var(--shadow); font-size: 1.1rem; cursor: pointer; backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); display: flex; align-items: center; justify-content: center; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.fab-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); }
.fab-btn:active { transform: scale(0.92); }
.bottom-sheet { position: absolute; bottom: 20px; left: 20px; right: 20px; background: var(--sheet-bg); border: 1px solid var(--sheet-border); border-radius: 24px; box-shadow: var(--shadow); z-index: 11; backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), height 0.3s ease; max-height: 50vh; display: flex; flex-direction: column; overflow: hidden; }
.sheet-handle-bar { width: 100%; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.sheet-handle { width: 32px; height: 4px; background: #d1d5db; border-radius: 10px; opacity: 0.5; }
.sheet-header { padding: 0 24px 12px 24px; flex-shrink: 0; }
.header-text h1 { font-size: 1.5rem; font-weight: 700; color: var(--text-main); display: flex; align-items: center; gap: 10px; margin: 0; letter-spacing: -0.5px; }
.live-badge { font-size: 0.6rem; background: var(--accent); color: white; padding: 4px 8px; border-radius: 100px; font-weight: 600; letter-spacing: 0.5px; box-shadow: 0 0 10px var(--accent-glow); animation: pulse-badge 2s infinite; }
.eta-badge { margin-top: 6px; font-size: 0.85rem; font-weight: 500; color: #10b981; display: flex; align-items: center; gap: 6px; }
.eta-badge.hidden { display: none; }
.chip { font-size: 0.8rem; padding: 8px 16px; border-radius: 100px; color: white; display: flex; align-items: center; gap: 8px; cursor: pointer; font-weight: 500; opacity: 0.7; transition: all 0.2s; border: 1px solid transparent; }
.chip.active-route { opacity: 1; transform: scale(1.05); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); }
.sheet-content { padding: 0 24px 24px 24px; overflow-y: auto; flex-grow: 1; }
.sheet-content h3 { font-size: 0.75rem; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; font-weight: 600; }
.bus-item { display: flex; align-items: center; background: var(--card-bg); padding: 12px; border-radius: 16px; margin-bottom: 12px; border: 1px solid rgba(0, 0, 0, 0.03); transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); cursor: pointer; position: relative; overflow: hidden; }
.bus-item.active-focus { border: 2px solid var(--accent); background: rgba(191, 30, 46, 0.05); box-shadow: 0 4px 12px rgba(191, 30, 46, 0.15); transform: scale(1.02); }
.bus-icon-wrapper { width: 48px; height: 48px; background: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-right: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); }
.bus-icon-wrapper img { width: 32px; height: 32px; object-fit: contain; }
.bus-info h4 { font-size: 1.05rem; margin-bottom: 4px; color: var(--text-main); font-weight: 600; }
.bus-info p { font-size: 0.85rem; color: var(--text-sub); margin: 0; }
.status-dot { width: 6px; height: 6px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-left: 6px; margin-bottom: 2px; }
.dot-green { background: #10b981; box-shadow: 0 0 8px #10b981; }
.dot-red { background: #ef4444; box-shadow: 0 0 8px #ef4444; animation: blink 1s infinite; }
.empty-state { text-align: center; padding: 40px 20px; color: var(--text-sub); }
.empty-state i { font-size: 2.5rem; margin-bottom: 15px; opacity: 0.4; color: var(--accent); }
@keyframes pulse-badge { 0% { box-shadow: 0 0 0 0 var(--accent-glow); } 70% { box-shadow: 0 0 0 6px rgba(191, 30, 46, 0); } 100% { box-shadow: 0 0 0 0 rgba(191, 30, 46, 0); } }
@keyframes blink { 50% { opacity: 0.5; } }
.marker-pulse { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; height: 100%; border-radius: 50%; background: rgba(191, 30, 46, 0.3); z-index: -1; animation: marker-ripple 2s infinite ease-out; }
@keyframes marker-ripple { 0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; } }
.mapboxgl-popup-content { background: var(--sheet-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid var(--sheet-border); border-radius: 16px; padding: 16px; box-shadow: var(--shadow); color: var(--text-main); }
.mapboxgl-popup-tip { border-top-color: var(--sheet-bg); }
.skeleton-loader { padding: 10px 0; }
.skeleton-loader.hidden { display: none; }
.skeleton-item { height: 70px; margin-bottom: 12px; border-radius: 16px; background: linear-gradient(90deg, var(--card-bg) 25%, rgba(0, 0, 0, 0.05) 50%, var(--card-bg) 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
@keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
.mobile-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 400px; height: 65px; background: var(--sheet-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border: 1px solid var(--sheet-border); border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); display: flex; justify-content: space-around; align-items: center; z-index: 300; padding: 0 10px; }
.nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-sub); font-size: 0.75rem; gap: 4px; padding: 8px 16px; border-radius: 12px; transition: all 0.3s ease; cursor: pointer; flex: 1; }
.nav-item i { font-size: 1.25rem; transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.nav-item.active { color: var(--accent); background: rgba(191, 30, 46, 0.1); }
.nav-item.active i { transform: translateY(-2px); }
.bottom-sheet { bottom: 95px !important; transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
.page-view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); z-index: 50; display: flex; flex-direction: column; padding-bottom: 90px; opacity: 0; transform: translateY(100%); transition: opacity 0.4s cubic-bezier(0.25, 1, 0.5, 1), transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), visibility 0.4s; visibility: hidden; pointer-events: none; }
.page-view.active-page { opacity: 1; transform: translateY(0); visibility: visible; pointer-events: auto; }
.page-header { padding: 60px 24px 20px 24px; background: linear-gradient(180deg, var(--bg-color) 80%, rgba(255, 255, 255, 0)); }
.page-header h2 { font-size: 1.8rem; color: var(--text-main); display: flex; align-items: center; gap: 12px; }
.page-content { flex: 1; overflow-y: auto; padding: 0 24px; }
.info-card { background: var(--card-bg); border: 1px solid var(--sheet-border); border-radius: 20px; padding: 20px; margin-bottom: 16px; display: flex; align-items: flex-start; gap: 16px; box-shadow: var(--shadow); }
.info-icon { width: 40px; height: 40px; background: #e0f2fe; color: #0284c7; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0; }
.info-icon.warning { background: #fef9c3; color: #ca8a04; }
.info-text h4 { font-size: 1.1rem; margin-bottom: 6px; color: var(--text-main); }
.info-text p { font-size: 0.9rem; color: var(--text-sub); line-height: 1.5; }
#route-view.page-view { background: transparent; display: flex; align-items: flex-end; justify-content: center; pointer-events: none; z-index: 200; padding: 0; }
#route-view.active-page { pointer-events: auto; background: transparent; backdrop-filter: none; }
.route-panel-overlay { width: 100%; height: 100%; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 95px; }
.route-master-panel { width: 100%; max-width: 400px; background: rgba(255, 255, 255, 0.95); backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px); border-top-left-radius: 28px; border-top-right-radius: 28px; box-shadow: 0 -10px 40px rgba(0,0,0,0.15); padding: 24px; transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); border: 1px solid rgba(255,255,255,0.5); margin: 0 10px; border-bottom-left-radius: 28px; border-bottom-right-radius: 28px; margin-bottom: 20px; }
#route-view.active-page .route-master-panel { transform: translateY(0); }
.panel-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px; }
.route-list-container { display: flex; flex-direction: column; gap: 16px; margin-bottom: 24px; }
.route-card-item { display: flex; align-items: center; padding: 16px; background: white; border-radius: 20px; border: 2px solid transparent; box-shadow: 0 4px 15px rgba(0,0,0,0.03); cursor: pointer; transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); position: relative; overflow: hidden; }
.route-card-item.active-card { border-color: var(--accent); background: rgba(191, 30, 46, 0.03); box-shadow: 0 8px 25px rgba(191, 30, 46, 0.1); }
.route-card-item.active-card .custom-toggle { background: var(--accent); }
.route-card-item.active-card .custom-toggle::after { transform: translateX(14px); background: white; }
.route-card-item#card-ruteSore.active-card { border-color: var(--secondary); background: rgba(21, 155, 179, 0.03); box-shadow: 0 8px 25px rgba(21, 155, 179, 0.1); }
.route-card-item#card-ruteSore.active-card .custom-toggle { background: var(--secondary); }
.route-card-icon { width: 48px; height: 48px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; margin-right: 16px; flex-shrink: 0; }
.morning-theme { background: #fff7ed; color: #f97316; }
.afternoon-theme { background: #ecfeff; color: #06b6d4; }
.route-card-info { flex: 1; }
.route-name { display: block; font-weight: 700; font-size: 1.05rem; color: var(--text-main); margin-bottom: 4px; }
.route-meta { display: flex; gap: 12px; font-size: 0.8rem; color: var(--text-sub); flex-wrap: wrap; }
.route-checkbox { margin-left: 10px; }
.custom-toggle { width: 36px; height: 22px; background: #e5e7eb; border-radius: 20px; position: relative; transition: background 0.3s ease; }
.custom-toggle::after { content: ''; position: absolute; top: 3px; left: 3px; width: 16px; height: 16px; background: white; border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,0.2); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.panel-footer-info { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
.info-pill { background: rgba(0,0,0,0.04); padding: 8px 14px; border-radius: 100px; font-size: 0.8rem; color: var(--text-sub); display: flex; align-items: center; gap: 6px; font-weight: 500; }
.image-modal { display: none; position: fixed; z-index: 2000; padding-top: 50px; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.9); backdrop-filter: blur(5px); transition: opacity 0.3s ease; }
.modal-content { margin: auto; display: block; width: 80%; max-width: 900px; max-height: 80vh; object-fit: contain; border-radius: 12px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); animation: zoomIn 0.3s; }
.close-modal { position: absolute; top: 20px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; transition: 0.3s; cursor: pointer; }
@media (min-width: 768px) {
    .bottom-sheet { top: 20px; bottom: auto; left: 20px; right: auto; width: 380px; max-height: 85vh; }
    .sheet-handle-bar { display: none; }
    .sheet-header { padding-top: 24px; }
    .floating-controls { top: 20px; right: 20px; }
    .mobile-nav { bottom: 30px; }
    .bottom-sheet { bottom: auto !important; }
    .route-panel-overlay { align-items: center; padding-bottom: 0; }
    .route-master-panel { margin: 0; border-radius: 28px; }
}
